<div class="container" ng-controller="upManagerCtrl" ng-if="actualUser">
    <div class="row">
        <div class="col-12">
            <img src="assets/img/AccLogo.png" height="50" width="207" alt="Accenture" />
            <button ng-click="logout()" ng-controller="pagesCtrl" id="logout" class="btn btn-primary pull-right ng-scope">Logout</button>
            <button ng-click="teamPage()" ng-controller="pagesCtrl" id="teamPage" class="btn btn-primary pull-right ng-scope">Teams</button>
            <button ng-click="mainPage()" ng-controller="pagesCtrl" id="mainPage" class="btn btn-primary pull-right ng-scope">Devices</button>
            <button ng-click="adminPage()" ng-controller="pagesCtrl" id="adminPage" class="btn btn-primary pull-right ng-scope">Administrators</button>
            <h1>Add new device</h1>
            <hr />
            <form name="newDeviceForm" class="well" ng-submit="addDevice(name, os, osVersion, type, displaySize, teamId)" enctype='multipart/form-data'>
                <div class="control-group" ng-class="{error: newDeviceForm.name.$invalid}">
                    <label>Device Name:</label>
                    <input type="text" name="name" ng-model="name" required>
                    <span ng-show="newDeviceForm.name.$error.required" class="help-inline">Required</span>
                    <span ng-show="newDeviceForm.name.$error.pattern" class="help-inline">Invalid Name</span>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.os.$invalid}">
                    <label>Operative System:</label>
                    <input type="text" name="os" ng-model="os" required>
                    <span ng-show="newDeviceForm.os.$error.required" class="help-inline">Required</span>
                    <span ng-show="newDeviceForm.os.$error.invalid" class="help-inline">Invalid OS</span>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.osVersion.$invalid}">
                    <label>Operative System Version:</label>
                    <input type="text" name="osVersion" ng-model="osVersion" required>
                    <span ng-show="newDeviceForm.osVersion.$error.required" class="help-inline">Required</span>
                    <span ng-show="newDeviceForm.osVersion.$error.invalid" class="help-inline">Invalid OS Version</span>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.type.$invalid}">
                    <label>Device Type:</label>
                    <input type="text" name="type" ng-model="type" required>
                    <span ng-show="newDeviceForm.type.$error.required" class="help-inline">Required</span>
                    <span ng-show="newDeviceForm.type.$error.invalid" class="help-inline">Set the Device Type</span>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.displaySize.$invalid}">
                    <label>Device Display Size:</label>
                    <input type="text" name="displaySize" ng-model="displaySize" required>
                    <span ng-show="newDeviceForm.displaySize.$error.required" class="help-inline">Required</span>
                    <span ng-show="newDeviceForm.displaySize.$error.invalid" class="help-inline">Set a Display Size</span>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.img.$invalid}"ng-controller="TestController">
                    <label>Device Image:</label>
                    <input ng-file-select type="file">

                    <div class="col-md-9" style="margin-bottom: 40px">

                        <h3>Upload queue</h3>
                        <p>Queue length: {{ uploader.queue.length }}</p>

                        <table class="table">
                            <thead>
                                <tr>
                                    <th width="50%">Name</th>
                                    <th ng-show="uploader.isHTML5">Size</th>
                                    <th ng-show="uploader.isHTML5">Progress</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in uploader.queue">
                                    <td><strong>{{ item.file.name }}</strong></td>
                                    <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>
                                    <td ng-show="uploader.isHTML5">
                                        <div class="progress" style="margin-bottom: 0;">
                                            <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                                        <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                                        <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                                    </td>
                                    <td nowrap>
                                        <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
                                            <span class="glyphicon glyphicon-upload"></span> Upload
                                        </button>
                                        <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
                                            <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                                        </button>
                                        <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                            <span class="glyphicon glyphicon-trash"></span> Remove
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div>
                            <p>
                                Queue progress:
                                <div class="progress" style="">
                                    <div class="progress-bar" role="progressbar" ng-style="{ 'width': uploader.progress + '%' }"></div>
                                </div>
                            </p>
                            <button type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length">
                                <span class="glyphicon glyphicon-upload"></span> Upload all
                            </button>
                            <button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading">
                                <span class="glyphicon glyphicon-ban-circle"></span> Cancel all
                            </button>
                            <button type="button" class="btn btn-danger btn-s" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length">
                                <span class="glyphicon glyphicon-trash"></span> Remove all
                            </button>
                        </div>

                    </div>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.teamId.$invalid}">
                    <label>Owner Team:</label>
                    <select name="teamId" ng-model="teamId" ng-options="team as team.name for team in teams" required></select>
                    <span ng-show="newDeviceForm.teamId.$error.required" class="help-inline">Required</span>
                    <span ng-show="newDeviceForm.teamId.$error.invalid" class="help-inline">Select a Team</span>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.name.$invalid}">
                    <label class="error">{{msgtxt}}</label>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.os.$invalid}">
                    <label class="error">{{msgtxt}}</label>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.osVersion.$invalid}">
                    <label class="error">{{msgtxt}}</label>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.type.$invalid}">
                    <label class="error">{{msgtxt}}</label>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.displaySize.$invalid}">
                    <label class="error">{{msgtxt}}</label>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.img.$invalid}">
                    <label class="error">{{msgtxt}}</label>
                </div>

                <div class="control-group" ng-class="{error: newDeviceForm.teamId.$invalid}">
                    <label class="error">{{msgtxt}}</label>
                </div>
                <br>
                <button type="submit" ng-disabled="isClean() || newDeviceForm.$invalid" class="btn btn-primary">New Device</button>
            </form>
        </div>
    </div>
</div>
